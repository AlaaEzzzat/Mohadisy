<div class="projects pt-5">
  <div class="row">
    <ng-container *ngFor="let service of projectServices; let i = index">
      <div class="col" *ngIf="activeService == service.id">
        <div
          [id]="service.id"
          class="btn mainBk p-2 px-3 w-100 d-flex justify-content-between"
          (click)="isActiveService(service.id)"
        >
          <span class="name cairo">{{ service.name }}</span>
          <span class="name cairo">{{ service.count }}</span>
        </div>
      </div>
    </ng-container>
  </div>
  <div class="row mt-3">
    <ng-container *ngFor="let cat of projectCategory; let i = index">
      <div class="col">
        <div
          [id]="cat.id"
          class="btn text-center p-2 px-3 w-100"
          (click)="isActiveCategory(cat.id)"
          [ngClass]="activeCategory == cat.id ? 'secondBk' : 'bg-white'"
        >
          <span class="text-center name cairo">{{ cat.name }}</span>
        </div>
      </div>
    </ng-container>
  </div>
  <div class="row mt-5" style="min-height: 100vh">
    <div class="col-md-3">
      <div class="cards">
        <ng-container
          *ngFor="let project of projectServiesArray; let i = index"
        >
          <app-price-offer-card
            (click)="showDetails(project)"
            [isActive]="activeProject == project.id"
            userType="sp"
            [project]="project"
          ></app-price-offer-card>
        </ng-container>
        <app-pagination
          [pagenation]="pagenation"
          [next]="next"
          [prev]="prev"
          [page]="page"
        ></app-pagination>
      </div>
    </div>
    <div class="col-md-9">
      <div *ngIf="projectServiesArray.length > 0">
        <div *ngIf="activeCategory == 2">
          <div class="bg-white p-3 mb-3 mx-2 d-flex justify-content-between">
            <div>
              <label class="head mb-3 cairo">سبب تعليق المشروع </label>
            <p class="cairo">
              {{ project.projectRequestStatus?.notes  }}
            </p>
            </div>
            <button class="btn mainBk cairo" (click)="current()">
              تفعيل المشروع
            </button>
          </div>
        </div>
        <app-project-layout
          userType="sp"
          [project]="project"
          [projectMilestnes]="projectMilestnes"
          [projectsComponents]="projectsComponents"
          [projectReqWorks]="projectReqWorks"
          [startChat]="startChatF"
          [startComplaint]="startComplaintF"
          [showImg]="showImg"
          [numOfCompltedMilesones]="numOfCompltedMilesones"
        ></app-project-layout>
      </div>
    </div>
  </div>
</div>

<div *ngIf="showModal">
  <app-img-modal [toggle]="toggle" [modalSrc]="modalSrc"></app-img-modal>
</div>

<div *ngIf="startChat">
  <app-start-chat
    userType="client"
    process="chat"
    [receiverId]="offerSender.applicationUserId"
    [toggleStatus]="toggleStatus"
  ></app-start-chat>
</div>

<div *ngIf="startComplaint">
  <app-start-chat
    userType="client"
    process="complaint"
    [receiverId]="offerSender.applicationUserId"
    [toggleStatus]="toggleStatus"
  ></app-start-chat>
</div>
