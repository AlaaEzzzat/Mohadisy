<div class="my-3 container-fluid">
  <div
    class="d-flex flex-row mb-3 col-12 justify-content-around flex-wrap flex-lg-nowrap"
  >
    <button
      class="btn rounded-0 cairo col-lg-2 col-sm-4 col-12 ms-2 text-nowrap p-2 mb-3 fs-5"
      role="button"
      (click)="getNewProfiles(page)"
      [ngStyle]="{
        'background-color': newApi === 1 ? '#004958' : '#ffffff',
        color: newApi === 1 ? '#ffffff' : '#000000'
      }"
    >
      طلبات الانضمام
    </button>
    <button
      class="btn rounded-0 cairo col-lg-2 col-sm-4 col-12 h-75 ms-2 text-nowrap p-2 mb-3 fs-5"
      role="button"
      (click)="getRejectedProfiles(page)"
      [ngStyle]="{
        'background-color': newApi === 2 ? '#004958' : '#ffffff',
        color: newApi === 2 ? '#ffffff' : '#000000'
      }"
    >
      طلبات المرفوضه
    </button>
    <button
      class="btn rounded-0 cairo h-75 col-lg-2 col-sm-4 col-12 ms-2 text-nowrap p-2 mb-3 fs-5"
      role="button"
      (click)="activeAllAcconting(page)"
      [ngStyle]="{
        'background-color': newApi === 3 ? '#004958' : '#ffffff',
        color: newApi === 3 ? '#ffffff' : '#000000'
      }"
    >
      الحسابات النشطه
    </button>
    <button
      class="cairo btn rounded-0 h-75 col-lg-2 col-sm-4 col-12 ms-2 text-nowrap p-2 mb-3 fs-5"
      role="button"
      (click)="getBlockedProfiles(page)"
      [ngStyle]="{
        'background-color': newApi === 5 ? '#004958' : '#ffffff',
        color: newApi === 5 ? '#ffffff' : '#000000'
      }"
    >
      الحسابات المعطله
    </button>
    <button
      class="cairo btn rounded-0 h-75 col-lg-2 col-sm-4 col-12 ms-2 text-nowrap p-2 mb-3 fs-5"
      role="button"
      (click)="getNonActiveAccount(page)"
      [ngStyle]="{
        'background-color': newApi === 4 ? '#004958' : '#ffffff',
        color: newApi === 4 ? '#ffffff' : '#000000'
      }"
    >
      الحسابات غيرالنشطه
    </button>
    <button
      class="cairo btn rounded-0 h-75 col-lg-2 col-sm-4 col-12 ms-2 text-nowrap p-2 mb-3 fs-5"
      role="button"
      (click)="getExpiredProfiles(page)"
      [ngStyle]="{
        'background-color': newApi === 6 ? '#004958' : '#ffffff',
        color: newApi === 6 ? '#ffffff' : '#000000'
      }"
    >
      الحسابات المنتهيه
    </button>
  </div>

  <div class="alert alert-success" role="alert" *ngIf="show">
    {{ messages }}
  </div>
  <div
    class="alert alert-danger d-flex align-items-center"
    role="alert"
    *ngIf="showDanger"
  >
    <div>العميل موجود بالفعل</div>
  </div>

  <div
    class="col-12 d-flex flex-row flex-wrap justify-content-between"
    *ngIf="isProcessing; else undefind"
  >
    <div class="col-md-4 col-12 position-relative">
      <form class="d-flex flex-column me-3">
        <!-- search company -->

        <div class="d-flex position-relative mb-3">
          <ng-container
            *ngIf="productCurrent.joinRequestStatus.accountStatus.id === 4"
          >
            <div class="btn-group bg-white ms-1 rounded-0">
              <button
                type="button"
                class="btn btn-white dropdown-toggle rounded-0"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                طلبات
              </button>
              <ul class="dropdown-menu text-end">
                <!-- <li><a class="dropdown-item"> المستقل</a></li> -->
                <!-- <li>
                  <a
                    class="dropdown-item"
                    (click)="getNewProfilesCompany(page)"
                  >
                    شركات
                  </a>
                </li> -->
                <li>
                  <a class="dropdown-item" (click)="getCompletedProfiles(page)">
                    طلبات مكتمله</a
                  >
                </li>
                <li>
                  <a
                    class="dropdown-item"
                    (click)="getNotCompletedProfiles(page)"
                  >
                    طلبات غير مكتمله</a
                  >
                </li>
              </ul>
            </div>
          </ng-container>
          <input
            class="form-control bg-white border-0 rounded-0 w-100"
            type="search"
            placeholder="Search for name ,number,location,etc"
            aria-label="Search"
            name="companyName"
            [(ngModel)]="companyName"
          />
          <button class="btn position-absolute top-0 start-0" type="submit">
            <i class="fa fa-search"></i>
          </button>
        </div>

        <!-- card company -->
        <ng-container *ngFor="let pro of iProfileData | filter: companyName">
          <div class="card mb-3 border-0 rounded-0">
            <div
              class="card-body rounded-0"
              (click)="objectProduct(pro, pro.id)"
              [ngStyle]="{
                'background-color':
                  productCurrent.id === pro.id ? '#004958' : '#ffffff',
                color: productCurrent.id === pro.id ? '#ffffff' : '#004958'
              }"
            >
              <div class="d-flex justify-content-between">
                <div class="d-flex">
                  <img
                    src="assets/icons/XMLID_1_.svg"
                    *ngIf="productCurrent.id != pro.id; else whiteIconw"
                  />
                  <ng-template #whiteIconw
                    ><img src="assets/icons/XMLID_1_WH.svg" class=""
                  /></ng-template>
                  <div class="card-title me-3">
                    <!-- <p class="typeCom"></p> -->
                    <p
                      class="fs-6 typeCom"
                      *ngIf="
                        pro.applicationUser.accountType.typeName;
                        else templateName
                      "
                    >
                      {{ pro.applicationUser.accountType.typeName }}
                    </p>
                    <ng-template #templateName> Null </ng-template>
                    <p class="fs-6" *ngIf="pro.companyName; else ind">
                      {{ pro.companyName }}
                    </p>
                    <ng-template #ind>
                      <p class="fs-6">{{ pro.firstName }} {{ pro.lastName }}</p>
                    </ng-template>
                  </div>
                </div>
                <div class="d-flex">
                  <button
                    mat-icon-button
                    [matMenuTriggerFor]="menu"
                    aria-label="Example icon-button with a menu"
                  >
                    <mat-icon>more_vert</mat-icon>
                  </button>
                  <mat-menu #menu="matMenu" class="py-2">
                    <button mat-menu-item (click)="updatapro(productCurrent)">
                      <mat-icon class="text-white">edit</mat-icon>
                      <span>تعديل</span>
                    </button>
                  </mat-menu>
                </div>
              </div>

              <div class="d-flex mb-2">
                <img
                  src="assets/icons/Group 801.svg"
                  class=""
                  [hidden]="productCurrent.id === pro.id"
                />
                <img
                  src="assets/icons/Group 801White.svg"
                  class=""
                  [hidden]="productCurrent.id != pro.id"
                />
                <p class="fs-6 me-3">{{ pro.district.city.nameAr }}</p>
              </div>
              <div class="d-flex">
                <img
                  src="assets/icons/Phone.svg"
                  class=""
                  [hidden]="productCurrent.id === pro.id"
                />
                <img
                  src="assets/icons/PhoneWhite.svg"
                  class=""
                  [hidden]="productCurrent.id != pro.id"
                />
                <div class="me-3 d-flex flex-row justify-content-between w-100">
                  <small
                    class="fs-6"
                    *ngIf="pro.officePhoneNumber; else mostcal"
                  >
                    {{ pro.officePhoneNumber }} (966+)</small
                  >

                  <ng-template #mostcal>
                    <small class="fs-6">
                      {{ pro.applicationUser.phoneNumber }} (966+)
                    </small>
                  </ng-template>

                  <small class="opacity-75 align-content-end"
                    >منذ {{ calculateDiff(pro.dateCreated) }}يوم
                  </small>
                </div>
              </div>
            </div>
          </div>
        </ng-container>
        <!-- pagenation -->
        <div class="col-12">
          <div class="position-absolute top100" [hidden]="total <= 1">
            <nav aria-label="..." class="w-100 d-flex justify-content-center">
              <ul class="pagination w-100">
                <li class="page-item">
                  <button
                    (click)="prev()"
                    class="page-link rounded-0 btn-dark"
                    [disabled]="page <= 1"
                  >
                    السابق
                  </button>
                </li>

                <ng-container
                  class="page-item"
                  *ngFor="let mypage of pagenation; let i = index"
                >
                  <li class="page-item">
                    <a
                      class="page-link"
                      [ngClass]="mypage + 1 == page ? 'mainBk' : ''"
                      >{{ mypage + 1 }}</a
                    >
                  </li>
                </ng-container>
                <li class="page-item">
                  <button
                    (click)="next()"
                    class="page-link rounded-0 btn-dark"
                    [disabled]="page == pagenation.length"
                  >
                    التالي
                  </button>
                </li>
              </ul>
            </nav>
          </div>
        </div>

        <!-- end pagination -->
      </form>
    </div>

    <!--  -->
    <div class="col-md-7 sizew col-12 flex-row" [hidden]="!showInformation">
      <div class="col-12 card mb-3 border-0 rounded-0">
        <div class="row g-0 justify-content-evenly align-items-center">
          <div class="col-md-2">
            <img
              *ngIf="productCurrent.profilePicturePath; else company"
              src="{{ productCurrent.profilePicturePath }}"
              class="img-fluid rounded-0 w-75 ms-5 me-2 p-1"
              alt="null"
            />

            <ng-template #company>
              <img
                src="{{ productCurrent.companyLogoPath }}"
                class="img-fluid rounded-0 w-75 ms-5 me-2 p-1"
                alt="null"
            /></ng-template>
          </div>
          <div class="col-md-5">
            <div class="card-body">
              <div class="d-flex">
                <img src="assets/icons/XMLID_1_.svg" />

                <p class="fs-6 me-3 pt-2">
                  {{ productCurrent.applicationUser.accountType.typeName }}
                </p>
              </div>
              <p
                class="card-text fs-6"
                *ngIf="productCurrent.companyName; else ind"
              >
                {{ productCurrent.companyName }}
              </p>
              <ng-template #ind>
                <p class="card-text fs-6">
                  {{ productCurrent.firstName }} {{ productCurrent.lastName }}
                </p>
              </ng-template>

              <p class="card-text">
                <small class="text-muted fs-6"> نوع الخدمه </small>
                <!-- ?? -->
                <span
                  class="typeCom fs-6"
                  *ngIf="productCurrent.projectService; else mstql"
                  >{{ productCurrent.projectService.name }}</span
                >
                <ng-template #mstql>
                  <span class="typeCom">استشارات</span></ng-template
                >
              </p>
            </div>
          </div>
          <div class="col-md-5">
            <div
              class="d-flex"
              *ngIf="productCurrent.joinRequestStatus.accountStatusId === 4"
            >
              <a
                type="button"
                class="btn complete col-4 rounded-0"
                data-bs-toggle="modal"
                data-bs-target="#changeToAccepted"
              >
                <i class="fa-solid fa-check text-secondary"></i>
                <p>مكتمل</p></a
              >
              <a
                type="button"
                class="btn notcomplete col-4 rounded-0"
                data-bs-toggle="modal"
                data-bs-target="#exampleModal"
              >
                <i class="fa-solid fa-exclamation"></i>
                <p>غير مكتمل</p></a
              >
              <a
                type="button"
                class="btn reject col-4 rounded-0"
                data-bs-toggle="modal"
                data-bs-target="#exampleModalReject"
              >
                <i class="fa-solid fa-xmark"></i>
                <p>رفض</p></a
              >
            </div>

            <div
              class="d-flex justify-content-end ms-3 rounded-0"
              *ngIf="productCurrent.joinRequestStatus.accountStatusId === 1"
            >
              <a
                type="button"
                class="btn notcomplete"
                data-bs-toggle="modal"
                data-bs-target="#exampleModalAccepte"
              >
                <i class="fa-solid fa-exclamation"></i>
                <p>تفعيل</p></a
              >
              <!-- <a type="button" class="btn">
                <i class="bi bi-chat-dots"></i>
                <p>مراسله</p></a
              > -->
            </div>
            <div
              class="d-flex justify-content-end ms-3 rounded-0"
              *ngIf="
                productCurrent.joinRequestStatus.accountStatusId != 1 &&
                productCurrent.joinRequestStatus.accountStatusId != 4
              "
            >
              <a
                type="button"
                class="btn reject"
                data-bs-toggle="modal"
                data-bs-target="#exampleModalReject"
              >
                <i class="fa-solid fa-xmark"></i>
                <p>تعطيل</p></a
              >
            </div>
          </div>
        </div>
      </div>
      <!-- سبب عدم الاكتمال -->
      <div
        class="col-12 card mb-3 border-0 rounded-0 p-3"
        *ngIf="productCurrent.joinRequestStatus.accountStatusId != 4"
      >
        <p class="titleInformation fs-6">سبب عدم تاكيد الحساب</p>
        <p class="fs-6">{{ productCurrent.joinRequestStatus.description }}</p>
      </div>
      <!--    معلومات عن الشركه-->
      <div
        class="col-12 card mb-3 border-0 rounded-0 p-3"
        [hidden]="productCurrent.applicationUser.accountType.key != 'CO'"
      >
        <h4 class="card-title mb-4 titleInformation">الاوراق الثبوتيه</h4>

        <div class="d-flex flex-row flex-wrap justify-content-between">
          <div class="col-lg-5 col-12">
            <div
              class="d-flex justify-content-between mb-4"
              *ngIf="
                productCurrent.companyRegisterationNumberPath &&
                productCurrent.companyRegisterationNumberFile
              "
            >
              <p class="card-subtitle text-muted fs-6">
                سجل التجاري <br />
                <small class="fs-6 textInformation"
                  >{{ productCurrent.companyRegisterationNumber }}
                </small>
              </p>
              <a
                target="_blank"
                class="informationDownload bg-light d-flex px-2 align-items-center"
                (click)="
                  download(
                    productCurrent.companyRegisterationNumberPath,
                    productCurrent.companyRegisterationNumberFile
                  )
                "
              >
                <i class="fa fa-download typeCom ms-3"></i>
                <p class="pt-3">
                  {{ productCurrent.companyRegisterationNumberFile }}
                </p>
              </a>
            </div>
            <div
              class="d-flex justify-content-between align-items-center mb-4"
              *ngIf="
                productCurrent.socialInsuranceCertificatePath &&
                productCurrent.socialInsuranceCertificateFile
              "
            >
              <p class="card-subtitle text-muted fs-6">
                شهاده التأمينات الاجتماعية
              </p>
              <a
                target="_blank"
                class="informationDownload bg-light d-flex px-2 align-items-center"
                (click)="
                  download(
                    productCurrent.socialInsuranceCertificatePath,
                    productCurrent.socialInsuranceCertificateFile
                  )
                "
              >
                <i class="fa fa-download typeCom ms-3"></i>
                <p class="pt-3">
                  {{ productCurrent.socialInsuranceCertificateFile }}
                </p>
              </a>
            </div>
            <div
              class="d-flex justify-content-between align-items-center mb-4"
              *ngIf="
                productCurrent.zakatCertificatePath &&
                productCurrent.zakatCertificateFile
              "
            >
              <p class="card-subtitle text-muted fs-6">شهاده الزكاة والدخل</p>
              <a
                class="bg-light d-flex px-2 align-items-center informationDownload"
                (click)="
                  download(
                    productCurrent.zakatCertificatePath,
                    productCurrent.zakatCertificateFile
                  )
                "
              >
                <i class="fa fa-download typeCom ms-3"></i>
                <p class="pt-3">{{ productCurrent.zakatCertificateFile }}</p>
              </a>
            </div>
            <div
              class="d-flex justify-content-between mb-4 align-items-center"
              *ngIf="
                productCurrent.financialStatementFile &&
                productCurrent.financialStatementPath
              "
            >
              <p class="card-subtitle text-muted fs-6">التقريرالمالي</p>
              <a
                target="_blank"
                class="informationDownload bg-light d-flex px-2 align-items-center"
                (click)="
                  download(
                    productCurrent.financialStatementPath,
                    productCurrent.financialStatementFile
                  )
                "
              >
                <i class="fa fa-download typeCom ms-3"></i>
                <p class="pt-3">{{ productCurrent.financialStatementFile }}</p>
              </a>
            </div>
            <div
              class="d-flex justify-content-between mb-4"
              *ngIf="
                productCurrent.coCMembershipPath &&
                productCurrent.coCMembershipFile
              "
            >
              <p class="card-subtitle text-muted fs-6">عضوية الفرقة التجارية</p>
              <a
                target="_blank"
                class="informationDownload bg-light d-flex px-2 align-items-center"
                (click)="
                  download(
                    productCurrent.coCMembershipPath,
                    productCurrent.coCMembershipFile
                  )
                "
              >
                <i class="fa fa-download typeCom ms-3"></i>
                <p class="pt-3">{{ productCurrent.coCMembershipFile }}</p>
              </a>
            </div>
          </div>

          <div class="col-lg-5 col-12">
            <div
              class="d-flex justify-content-between mb-4"
              *ngIf="productCurrent.licensePath && productCurrent.licenseFile"
            >
              <p class="card-subtitle text-muted fs-6">
                رقم الرخصة <br />
                <small class="fs-6 textInformation">{{
                  productCurrent.licenseNumber
                }}</small>
              </p>
              <a
                target="_blank"
                class="informationDownload bg-light d-flex px-2 align-items-center"
                (click)="
                  download(
                    productCurrent.licensePath,
                    productCurrent.licenseFile
                  )
                "
              >
                <i class="fa fa-download typeCom ms-3"></i>
                <p class="pt-3">{{ productCurrent.licenseFile }}</p>
              </a>
            </div>
            <div
              class="d-flex justify-content-between mb-4"
              *ngIf="
                productCurrent.companyRegisterationNumberPath &&
                productCurrent.companyRegisterationNumberFile
              "
            >
              <p class="card-subtitle text-muted fs-6">خطاب بنكي برقم البيان</p>
              <a
                target="_blank"
                class="informationDownload bg-light d-flex px-2 align-items-center"
                (click)="
                  download(
                    productCurrent.companyRegisterationNumberPath,
                    productCurrent.companyRegisterationNumberFile
                  )
                "
              >
                <i class="fa fa-download typeCom ms-3"></i>
                <p class="pt-3">
                  {{ productCurrent.companyRegisterationNumberFile }}
                </p>
              </a>
            </div>
            <div
              class="d-flex justify-content-between mb-4"
              *ngIf="
                productCurrent.saudizationCertificatePath &&
                productCurrent.saudizationCertificateFile
              "
            >
              <p class="card-subtitle text-muted fs-6">شهاده السعوده</p>
              <a
                target="_blank"
                class="informationDownload py-2 bg-light d-flex px-2 align-items-center"
                (click)="
                  download(
                    productCurrent.saudizationCertificatePath,
                    productCurrent.saudizationCertificateFile
                  )
                "
              >
                <i class="fa fa-download typeCom ms-3"></i>
                <p>{{ productCurrent.saudizationCertificateFile }}</p>
              </a>
            </div>
            <div
              class="d-flex justify-content-between mb-4"
              *ngIf="
                productCurrent.addedValueRegisterationCertificatePath &&
                productCurrent.addedValueRegisterationCertificateFile
              "
            >
              <p class="card-subtitle text-muted fs-6">ضربيه القيمه المضافه</p>
              <a
                target="_blank"
                class="informationDownload bg-light d-flex px-2 align-items-center"
                (click)="
                  download(
                    productCurrent.addedValueRegisterationCertificatePath,
                    productCurrent.addedValueRegisterationCertificateFile
                  )
                "
              >
                <i class="fa fa-download typeCom ms-3"></i>
                <p class="pt-3">
                  {{ productCurrent.addedValueRegisterationCertificateFile }}
                </p>
              </a>
            </div>
            <div
              class="d-flex justify-content-between mb-4"
              *ngIf="productCurrent.isoPath && productCurrent.isoFile"
            >
              <p class="card-subtitle text-muted fs-6">شهاده الايزو 9001</p>
              <a
                class="informationDownload bg-light d-flex px-2 align-items-center"
                (click)="
                  download(productCurrent.isoPath, productCurrent.isoFile)
                "
              >
                <i class="fa fa-download typeCom ms-3"></i>
                <p class="pt-3">{{ productCurrent.isoFile }}</p>
              </a>
            </div>
          </div>
        </div>
      </div>
      <div
        class="col-12 card mb-3 border-0 rounded-0 p-3"
        [hidden]="productCurrent.applicationUser.accountType.key === 'CO'"
      >
        <h4 class="card-title mb-4 titleInformation">الاوراق الثبوتيه</h4>

        <div class="d-flex flex-row flex-wrap justify-content-between">
          <div class="col-lg-5 col-12">
            <div
              class="d-flex justify-content-between mb-4"
              *ngIf="productCurrent.idPath && productCurrent.idFile"
            >
              <p class="card-subtitle text-muted fs-6">
                صوره البطاقه <br />
                <small class="fs-6 textInformation"
                  >{{ productCurrent.idNumber }}
                </small>
              </p>
              <a
                target="_blank"
                class="informationDownload bg-light d-flex px-2 align-items-center"
                (click)="download(productCurrent.idPath, productCurrent.idFile)"
              >
                <i class="fa fa-download typeCom ms-3"></i>
                <p class="pt-3">
                  {{ productCurrent.idFile }}
                </p>
              </a>
            </div>
          </div>

          <div class="col-lg-5 col-12">
            <div
              class="d-flex justify-content-between mb-4"
              *ngIf="
                productCurrent.membershipFile && productCurrent.membershipPath
              "
            >
              <p class="card-subtitle text-muted fs-6">
                رقم العضويه <br />
                <small class="fs-6 textInformation">{{
                  productCurrent.membershipNumber
                }}</small>
              </p>
              <a
                target="_blank"
                class="informationDownload bg-light d-flex px-2 align-items-center"
                (click)="
                  download(
                    productCurrent.membershipPath,
                    productCurrent.membershipFile
                  )
                "
              >
                <i class="fa fa-download typeCom ms-3"></i>
                <p class="pt-3 textInformation">
                  {{ productCurrent.membershipFile }}
                </p>
              </a>
            </div>
          </div>
        </div>
      </div>
      <!-- معلومات التواصل -->
      <div
        class="col-12 card mb-3 border-0 rounded-0 p-3"
        [hidden]="productCurrent.applicationUser.accountType.key === 'CO'"
      >
        <h4 class="card-title mb-4 h5 titleInformation">معلومات التواصل</h4>
        <div class="d-flex col-12 mb-4 flex-wrap">
          <div class="col-lg-4 col-6 mb-4">
            <p class="card-subtitle text-muted fs-6">الدوله</p>
            <small
              class="fs-6 textInformation"
              *ngIf="productCurrent.district.city.nameEn; else cityName"
              >{{ productCurrent.district.city.nameEn }}</small
            >
            <ng-template #cityName> _ </ng-template>
          </div>
          <div class="col-lg-4 col-6 mb-4">
            <p class="card-subtitle text-muted fs-6">المدينه</p>
            <small
              class="fs-6 textInformation"
              *ngIf="productCurrent.district.city.nameEn; else city"
              >{{ productCurrent.district.city.nameEn }}</small
            >
            <ng-template #city> _ </ng-template>
          </div>
          <div class="col-lg-4 col-6 mb-4">
            <p class="card-subtitle text-muted fs-6">المنطقه</p>
            <small
              class="fs-6 textInformation"
              *ngIf="
                productCurrent.district.city.region.nameEn;
                else regionName
              "
              >{{ productCurrent.district.city.region.nameEn }}</small
            >
            <ng-template #regionName> _ </ng-template>
          </div>
          <div class="col-lg-4 col-6 mb-4">
            <p class="card-subtitle text-muted fs-6">العنوان</p>
            <small
              class="fs-6 textInformation"
              *ngIf="productCurrent.shortAddress; else shortAddress"
              >{{ productCurrent.shortAddress }}</small
            >
            <ng-template #shortAddress> _ </ng-template>
          </div>

          <div class="col-lg-4 col-6 mb-4">
            <p class="card-subtitle text-muted fs-6">عنوان البريد الالكتروني</p>
            <small
              class="fs-6 textInformation"
              *ngIf="productCurrent.applicationUser.email; else emailName"
              >{{ productCurrent.applicationUser.email }}</small
            >
            <ng-template #emailName
              ><small class="fs-6 text-center textInformation">
                _
              </small></ng-template
            >
          </div>
          <div class="d-flex col-4 flex-column">
            <p class="card-subtitle text-muted fs-6">الجوال</p>
            <small
              class="fs-6 textInformation"
              *ngIf="
                productCurrent.applicationUser.phoneNumber;
                else websiteLink
              "
              >{{ productCurrent.applicationUser.phoneNumber }} +</small
            >
            <ng-template #websiteLink> _ </ng-template>
          </div>
          <div class="col-lg-4 col-6 mb-4">
            <p class="card-subtitle text-muted fs-6">صندوق البريد</p>
            <small
              class="fs-6 textInformation"
              *ngIf="productCurrent.postalBox; else box"
              >{{ productCurrent.postalBox }}</small
            >
            <ng-template #box> _ </ng-template>
          </div>
          <div class="col-lg-4 col-6 mb-4">
            <p class="card-subtitle text-muted fs-6">رمز البريد</p>
            <small
              class="fs-6 textInformation"
              *ngIf="productCurrent.postalCode; else postcode"
              >{{ productCurrent.postalCode }}
            </small>
            <ng-template #postcode> _ </ng-template>
          </div>
        </div>
      </div>
      <div
        class="col-12 card mb-3 border-0 rounded-0 p-3"
        [hidden]="productCurrent.applicationUser.accountType.key != 'CO'"
      >
        <h4 class="card-title mb-4 titleInformation">معلومات التواصل</h4>
        <div class="d-flex col-12 mb-4 flex-wrap">
          <div class="col-lg-4 col-6 mb-4">
            <p class="card-subtitle text-muted fs-6">الدوله</p>
            <small
              class="fs-6 textInformation"
              *ngIf="productCurrent.district.city.nameEn; else cityName"
              >{{ productCurrent.district.city.nameEn }}</small
            >
            <ng-template #cityName> _ </ng-template>
          </div>
          <div class="col-lg-4 col-6 mb-4">
            <p class="card-subtitle text-muted fs-6">المدينه</p>
            <small
              class="fs-6 textInformation"
              *ngIf="productCurrent.district.city.nameEn; else city"
              >{{ productCurrent.district.city.nameEn }}</small
            >
            <ng-template #city> _ </ng-template>
          </div>
          <div class="col-lg-4 col-6 mb-4">
            <p class="card-subtitle text-muted fs-6">المنطقه</p>
            <small
              class="fs-6 textInformation"
              *ngIf="
                productCurrent.district.city.region.nameEn;
                else regionName
              "
              >{{ productCurrent.district.city.region.nameEn }}</small
            >
            <ng-template #regionName> _ </ng-template>
          </div>
          <div class="col-lg-4 col-6 mb-4">
            <p class="card-subtitle text-muted fs-6">العنوان</p>
            <small
              class="fs-6 textInformation"
              *ngIf="productCurrent.streetName; else shortAddress"
              >{{ productCurrent.streetName }}-{{
                productCurrent.district.nameAr
              }}</small
            >
            <ng-template #shortAddress> _ </ng-template>
          </div>
          <div class="col-lg-4 col-6 mb-4">
            <p class="card-subtitle text-muted fs-6">رقم هاتف المكتب</p>
            <small
              class="fs-6 textInformation"
              *ngIf="productCurrent.officePhoneNumber; else officePhoneNumber"
              >{{ productCurrent.officePhoneNumber }}</small
            >
            <ng-template #officePhoneNumber> _ </ng-template>
          </div>
          <div class="col-lg-4 col-6 mb-4">
            <p class="card-subtitle text-muted fs-6">عنوان البريد الالكتروني</p>
            <small
              class="fs-6 textInformation"
              *ngIf="productCurrent.applicationUser.email; else emailName"
              >{{ productCurrent.applicationUser.email }}</small
            >
            <ng-template #emailName> _ </ng-template>
          </div>
          <div class="d-flex col-4 flex-column">
            <p class="card-subtitle text-muted fs-6">رابط الموقع</p>
            <small
              class="fs-6 textInformation"
              *ngIf="productCurrent.websiteLink; else websiteLink"
              >{{ productCurrent.websiteLink }}</small
            >
            <ng-template #websiteLink> _ </ng-template>
          </div>
          <div class="col-lg-4 col-6 mb-4">
            <p class="card-subtitle text-muted fs-6">صندوق البريد</p>
            <small
              class="fs-6 textInformation"
              *ngIf="productCurrent.postalBox; else box"
              >{{ productCurrent.postalBox }}</small
            >
            <ng-template #box>
              <small class="fs-6 text-center textInformation">_</small>
            </ng-template>
          </div>
          <div class="col-lg-4 col-6 mb-4">
            <p class="card-subtitle text-muted fs-6">رمز البريد</p>
            <small
              class="fs-6 textInformation"
              *ngIf="productCurrent.postalCode; else postcode"
              >{{ productCurrent.postalCode }}
            </small>
            <ng-template #postcode> _ </ng-template>
          </div>
        </div>
      </div>

      <!-- معلومات عن ممثل الموقع -->
      <div
        class="col-12 card mb-3 border-0 rounded-0 p-3"
        *ngIf="productCurrent.applicationUser.accountType.key == 'CO'"
      >
        <h4 class="card-title mb-4 titleInformation">معلومات عن ممثل الموقع</h4>
        <div class="d-flex justify-content-between flex-wrap">
          <div>
            <p class="card-subtitle text-muted fs-6">الاسم</p>
            <small
              class="fs-6 textInformation"
              *ngIf="productCurrent.representative.firstName; else firstName"
              >{{ productCurrent.representative.firstName
              }}{{ productCurrent.representative.lastName }}</small
            >
            <ng-template #firstName> _ </ng-template>
          </div>
          <div>
            <p class="card-subtitle text-muted fs-6">رقم التليفون</p>
            <small
              class="fs-6 textInformation"
              *ngIf="
                productCurrent.representative.phoneNumber;
                else phoneNumber
              "
              >{{ productCurrent.representative.phoneNumber }}
            </small>
            <ng-template #phoneNumber> _ </ng-template>
          </div>
          <div>
            <p class="card-subtitle text-muted fs-6">البريد الالكتروني</p>
            <small
              class="fs-6 textInformation"
              *ngIf="productCurrent.representative.email; else email"
              >{{ productCurrent.representative.email }}</small
            >
            <ng-template #email> _ </ng-template>
          </div>
        </div>
      </div>
      <!-- serviceProviderWorks -->
      <div
        class="col-12 d-flex justify-content-between align-items-center mb-3 border-0 rounded-0 p-3 serviceProviderWorksBg"
      >
        <p>المشاريع السابقه</p>
        <p>{{ productCurrent.serviceProviderWorks.length }} مشروع</p>
      </div>

      <!-- <div class="col-12 card mb-3 border-0 rounded-0 p-3" *ngIf="productCurrent.applicationUser.accountType.key == 'CO'
      ">
        <h4 class="card-title mb-4 titleInformation">معلومات عن ممثل الموقع</h4>
        <div class="d-flex justify-content-between flex-wrap">
          <div>
            <p class="card-subtitle text-muted h5">الاسم</p>
            <small
              class="fs-6 "
              *ngIf="productCurrent.representative.firstName; else firstName"
              >{{ productCurrent.representative.firstName }}{{ productCurrent.representative.lastName }}</small
            >
            <ng-template #firstName> _ </ng-template>
          </div>
          <div>
            <p class="card-subtitle text-muted h5">رقم التليفون</p>
            <small
              class="fs-6 "
              *ngIf="productCurrent.representative.phoneNumber; else phoneNumber"
              >{{ productCurrent.representative.phoneNumber }} 966+
            </small>
            <ng-template #phoneNumber> _ </ng-template>
          </div>
          <div>
            <p class="card-subtitle text-muted h5">البريد الالكتروني</p>
            <small
              class="fs-6 "
              *ngIf="productCurrent.representative.email; else email"
              >{{ productCurrent.representative.email }}</small
            >
            <ng-template #email> _ </ng-template>
          </div>
        </div>
      </div> -->
      <!-- معلومات عن الموظفين-->
      <!-- <div class="col-12 card mb-3 border-0 rounded-0 p-3">
        <h4 class="card-title mb-4 h5 titleInformation">معلومات عن الموظفين</h4>
        card loop
        <div
          class="d-flex col-12 mb-4"
          *ngFor="let employes of productCurrent.district.employees"
        >
          <div class="d-flex col-6 flex-column">
            <p
              class="card-subtitle text-muted h5"
              *ngIf="productCurrent.representative.name; else employeeName"
            >
              الاسم
            </p>
            <small class="fs-6 ">{{
              productCurrent.district.employees.name
            }}</small>
            <ng-template #employeeName> _ </ng-template>
          </div>
          <div class="d-flex col-6 flex-column">
            <p
              class="card-subtitle text-muted h5"
              *ngIf="
                productCurrent.representative.employeeLevel;
                else employeeLevel
              "
            >
              المستوى
            </p>
            <small class="fs-6 ">{{
              productCurrent.district.employees.employeeLevel
            }}</small>
            <ng-template #employeeLevel> _ </ng-template>
          </div>
        </div>
      </div> -->
    </div>
  </div>

  <ng-template #undefind>
    <div
      class="alert alert-danger d-flex align-items-center h4"
      role="alert"
      *ngIf="!isProcessing"
    >
      <div>حاليا لايوجد طلبات</div>
    </div>
  </ng-template>
</div>
<!-- غير مكتمل -->
<div
  class="modal fade"
  id="exampleModal"
  tabindex="-1"
  aria-labelledby="exampleModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div
        class="modal-header d-flex justify-content-between align-items-center modaltitle px-3 pt-3 pb-2 border-0"
      >
        <h4 class="modal-title col-11" id="exampleModalLabel">
          سبب عدم اكتمال الحساب
        </h4>

        <button
          type="button"
          class="btn text-white col-1"
          data-bs-dismiss="modal"
          aria-label="Close"
        >
          <mat-icon>close</mat-icon>
        </button>
      </div>
      <div class="modal-body my-3 modalbody">
        <form [formGroup]="userformMassage">
          <textarea
            type="text"
            class="form-control fs-5"
            placeholder=" سبب عدم اكتمال "
            name="massage"
            id="massage"
            cols="50"
            rows="3"
            value="text"
            formControlName="massage"
          ></textarea>
        </form>
      </div>
      <div class="modal-footer modalfooter">
        <button
          type="button"
          class="btn"
          data-bs-dismiss="modal"
          (click)="changeToNotComplette()"
        >
          حفظ
        </button>
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          الغاء
        </button>
      </div>
    </div>
  </div>
</div>

<!-- تعطيل /الرفض -->
<div
  class="modal fade"
  id="exampleModalReject"
  tabindex="-1"
  aria-labelledby="exampleModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div
        class="modal-header d-flex justify-content-between align-items-center modaltitle px-3 pt-3 pb-2 border-0"
      >
        <h4 class="modal-title col-11" id="exampleModalLabel">
          سبب تعطيل الحساب
        </h4>

        <button
          type="button"
          class="btn text-white col-1"
          data-bs-dismiss="modal"
          aria-label="Close"
        >
          <mat-icon>close</mat-icon>
        </button>
      </div>
      <div class="modal-body my-3 modalbody">
        <form [formGroup]="userformMassage">
          <textarea
            type="text"
            class="form-control fs-5"
            placeholder=" سبب الرفض "
            name="massage"
            id="massage"
            cols="50"
            rows="2"
            value="text"
            formControlName="massage"
          ></textarea>
        </form>
      </div>
      <div class="modal-footer modalfooter">
        <button
          type="button"
          class="btn"
          data-bs-dismiss="modal"
          (click)="changeToReject()"
        >
          حفظ
        </button>
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          الغاء
        </button>
      </div>
    </div>
  </div>
</div>

<!-- تاكيد -->
<div
  class="modal fade"
  id="changeToAccepted"
  tabindex="-1"
  aria-labelledby="exampleModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div
        class="modal-header d-flex justify-content-between align-items-center modaltitle px-3 pt-3 pb-2 border-0"
      >
        <h4 class="modal-title col-11" id="exampleModalLabel">
          هل انت متاكد من الموافقه علي هذا الطلب ؟
        </h4>

        <button
          type="button"
          class="btn text-white col-1"
          data-bs-dismiss="modal"
          aria-label="Close"
        >
          <mat-icon>close</mat-icon>
        </button>
      </div>
      <div class="modal-footer modalfooter">
        <button
          type="button"
          class="btn"
          data-bs-dismiss="modal"
          (click)="changeToAccepted()"
        >
          نعم
        </button>
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          لا
        </button>
      </div>
    </div>
  </div>
</div>

<!-- تفعيل -->
<!-- <div
  class="modal fade"
  id="exampleModalAccepte"
  tabindex="-1"
  aria-labelledby="exampleModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-body">
        <h4 class="modal-title" id="exampleModalLabel">
          هل انت متاكد من تفعيل هذاالحساب ؟
        </h4>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          لا
        </button>
        <button
          type="button"
          class="btn btn-success"
          data-bs-dismiss="modal"
          (click)="accepted()"
        >
        نعم
        </button>
      </div>
    </div>
  </div>
</div> -->

<!-- Modal ub date-->

<div
  class="modal fade"
  id="exampleModalAccepte"
  tabindex="-1"
  aria-labelledby="exampleModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div
        class="modal-header modaltitle d-flex justify-content-between align-items-center modaltitle px-3 pt-3 pb-2 border-0"
      >
        <h4 class="modal-title col-11" id="exampleModalLabel">تفعيل الحساب</h4>

        <button
          type="button"
          class="btn text-white col-1"
          data-bs-dismiss="modal"
          aria-label="Close"
        >
          <mat-icon>close</mat-icon>
        </button>
      </div>
      <div class="modal-body my-3 modalbody">
        <h4 class="fs-5">هل انت متاكد من تفعيل هذاالحساب ؟</h4>
      </div>
      <div class="modal-footer modalfooter">
        <button
          type="button"
          class="btn"
          data-bs-dismiss="modal"
          (click)="accepted()"
        >
          نعم
        </button>
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          لا
        </button>
      </div>
    </div>
  </div>
</div>
