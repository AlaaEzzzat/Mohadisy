"use strict";(self.webpackChunkAngularBaseStructure=self.webpackChunkAngularBaseStructure||[]).push([[797],{1693:(U,w,a)=>{a.d(w,{o:()=>P});var t=a(2340),S=a(5e3),v=a(520);let P=(()=>{class f{constructor(g){this._HttpClient=g}storeComplaint(g){return this._HttpClient.post(`${t.N.baseUrl}/api/Complaint/storeComplaint`,g)}getComplaints(){return this._HttpClient.get(`${t.N.baseUrl}/api/Complaint/getComplaints`)}getAllOrganizationalServiceProviderProfiles(g){return this._HttpClient.get(`${t.N.baseUrl}/api/OrganizationalServiceProvider/getAllProfiles/Page/${g||1}`)}getAllIndividualServiceProviderProfiles(g){return this._HttpClient.get(`${t.N.baseUrl}/api/IndividualServiceProvider/getAllProfiles/Page/${g||1}`)}getAllClientProfiles(g){return this._HttpClient.get(`${t.N.baseUrl}/api/Client/getAllProfiles/Page/${g||1}`)}}return f.\u0275fac=function(g){return new(g||f)(S.LFG(v.eN))},f.\u0275prov=S.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},5136:(U,w,a)=>{a.d(w,{B:()=>E});var t=a(5e3),S=a(1693),v=a(7250),P=a(9808),f=a(2601);function T(x,M){if(1&x){const n=t.EpF();t.ynx(0),t.TgZ(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"div",8)(6,"div",9)(7,"p"),t._UZ(8,"img",10),t.qZA(),t.TgZ(9,"h4",11),t._uU(10),t.qZA(),t.TgZ(11,"p",12),t._uU(12),t.qZA(),t.TgZ(13,"p",12),t._uU(14),t.ALo(15,"date"),t.qZA(),t.TgZ(16,"a",13)(17,"span",14),t._uU(18," \u0627\u0644\u0645\u0632\u064a\u062f "),t.qZA(),t._UZ(19,"i",15),t.qZA()()()(),t.TgZ(20,"div",16)(21,"div",17)(22,"div",18)(23,"p")(24,"b",14),t._uU(25," \u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641 : "),t.qZA(),t.TgZ(26,"span",14),t._uU(27),t.qZA()(),t.TgZ(28,"p")(29,"b",14),t._uU(30," \u0627\u0644\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a : "),t.qZA(),t.TgZ(31,"span",14),t._uU(32),t.qZA()(),t.TgZ(33,"p",19),t.NdJ("click",function(){const d=t.CHM(n).$implicit;return t.oxw().sendMsg(d.complaintSenderId)}),t.O4$(),t.TgZ(34,"svg",20)(35,"g",21)(36,"g",22)(37,"g",23)(38,"g",24),t._UZ(39,"path",25),t.qZA()(),t.TgZ(40,"g",26)(41,"g",27),t._UZ(42,"path",28),t.qZA()(),t.TgZ(43,"g",29)(44,"g",30),t._UZ(45,"path",31),t.qZA()()()()(),t.kcU(),t.TgZ(46,"span",32),t._uU(47,"\u062a\u0648\u0627\u0635\u0644 \u0645\u0639\u064a \u0645\u0646 \u0647\u0646\u0627 "),t.qZA()()()()()()()(),t.BQk()}if(2&x){const n=M.$implicit,h=t.oxw();t.xp6(8),t.Q6J("src","Service Provider"==h.userRole?null==n.complaintSender||null==n.complaintSender.clientProfile?null:n.complaintSender.clientProfile.profilePicturePath:(null==n.complaintSender||null==n.complaintSender.organizationalServiceProviderProfile?null:n.complaintSender.organizationalServiceProviderProfile.profilePicturePath)||(null==n.complaintSender||null==n.complaintSender.individualServiceProviderProfile?null:n.complaintSender.individualServiceProviderProfile.profilePicturePath),t.LSH),t.xp6(2),t.hij(" ","Service Provider"==h.userRole?(null==n.complaintSender||null==n.complaintSender.clientProfile?null:n.complaintSender.clientProfile.firstName)+" "+(null==n.complaintSender||null==n.complaintSender.clientProfile?null:n.complaintSender.clientProfile.firstName):(null==n.complaintSender||null==n.complaintSender.organizationalServiceProviderProfile?null:n.complaintSender.organizationalServiceProviderProfile.companyName)||(null==n.complaintSender||null==n.complaintSender.individualServiceProviderProfile?null:n.complaintSender.individualServiceProviderProfile.firstName)+" "+(null==n.complaintSender||null==n.complaintSender.individualServiceProviderProfile?null:n.complaintSender.individualServiceProviderProfile.lastName)," "),t.xp6(2),t.hij(" ",n.content," "),t.xp6(2),t.hij(" ",t.lcZ(15,6,n.dateCreated)," "),t.xp6(13),t.Oqu(null==n.complaintSender?null:n.complaintSender.phoneNumber),t.xp6(5),t.Oqu(null==n.complaintSender?null:n.complaintSender.email)}}function g(x,M){if(1&x&&(t.TgZ(0,"div"),t._UZ(1,"app-start-chat",33),t.qZA()),2&x){const n=t.oxw();t.xp6(1),t.Q6J("receiverId",n.recieverId)("toggleStatus",n.toggleStatus)}}let E=(()=>{class x{constructor(n,h){this.complaintService=n,this.clientService=h,this.userRole="",this.complaints=[],this.startChat=!1,this.recieverId="",this.sendMsg=r=>{this.recieverId=r,this.startChat=!0},this.toggleStatus=()=>{this.startChat=!1}}ngOnInit(){this.userRole=localStorage.getItem("role"),this.complaintService.getComplaints().subscribe(n=>{this.complaints=n.data,console.log(this.complaints),n.data.length>0&&'"Service provider"'==localStorage.getItem("role")&&this.complaintService.getAllClientProfiles().subscribe(h=>{console.log(h)})})}}return x.\u0275fac=function(n){return new(n||x)(t.Y36(S.o),t.Y36(v.y))},x.\u0275cmp=t.Xpm({type:x,selectors:[["app-complaint"]],decls:4,vars:2,consts:[[1,"container-fluid","pt-2",2,"min-height","100vh"],[1,"row"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"col-lg-4","col-md-6"],[1,"image-flip"],[1,"mainflip","flip-0"],[1,"frontside"],[1,"card"],[1,"card-body","text-center"],["alt","card image",1,"img-fluid",3,"src"],[1,"card-title","cairo"],[1,"card-text","cairo"],["href","https://www.fiverr.com/share/qb8D02",1,"btn","btn-mainBk","btn-sm"],[1,"cairo"],[1,"fa","fa-chevron-circle-left","me-2"],[1,"backside"],[1,"card","d-flex","justify-content-center","align-items-center"],[1,"card-body","d-flex","flex-column","justify-content-center"],[1,"card-text","d-flex","align-items-center",2,"cursor","pointer",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","22","height","22","viewBox","0 0 35.802 36.459"],["id","Group_485","data-name","Group 485","transform","translate(-196 -194)"],["id","chat","transform","translate(196 194)"],["id","Group_480","data-name","Group 480","transform","translate(0)"],["id","Group_479","data-name","Group 479"],["id","Path_2622","data-name","Path 2622","d","M21.35,0c-.01.01-.029.01-.059.01A17.886,17.886,0,0,0,7.264,29.042L4.655,35.1a.972.972,0,0,0,.508,1.28.993.993,0,0,0,.557.068l9.563-1.68A17.234,17.234,0,0,0,21.242,35.8,17.9,17.9,0,0,0,21.35,0Zm-.1,33.858a15.68,15.68,0,0,1-5.519-1.006.937.937,0,0,0-.518-.049L7.166,34.209,9.3,29.257a.982.982,0,0,0-.156-1.026,15.617,15.617,0,0,1-2.716-4.513,15.949,15.949,0,1,1,30.8-5.9v.059A15.992,15.992,0,0,1,21.252,33.858Z","transform","translate(-3.366)","fill","#029a16"],["id","Group_482","data-name","Group 482","transform","translate(10.872 14.33)"],["id","Group_481","data-name","Group 481"],["id","Path_2623","data-name","Path 2623","d","M120.918,146.7h-5.275a.977.977,0,1,0,0,1.954h5.275a.977.977,0,0,0,0-1.954Z","transform","translate(-114.666 -146.7)","fill","#029a16"],["id","Group_484","data-name","Group 484","transform","translate(10.872 19.215)"],["id","Group_483","data-name","Group 483"],["id","Path_2624","data-name","Path 2624","d","M127.756,196.7H115.643a.977.977,0,1,0,0,1.954h12.113a.977.977,0,1,0,0-1.954Z","transform","translate(-114.666 -196.7)","fill","#029a16"],[1,"me-3","cairo"],["userType","sp","process","chat",3,"receiverId","toggleStatus"]],template:function(n,h){1&n&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,T,48,8,"ng-container",2),t.qZA()(),t.YNc(3,g,2,2,"div",3)),2&n&&(t.xp6(2),t.Q6J("ngForOf",h.complaints),t.xp6(1),t.Q6J("ngIf",h.startChat))},directives:[P.sg,P.O5,f.W],pipes:[P.uU],styles:[".cardImg[_ngcontent-%COMP%]{width:150px}.cairo[_ngcontent-%COMP%]{font-family:cairo}.btn-mainBk[_ngcontent-%COMP%]{background-color:#004057;color:#fff}.image-flip[_ngcontent-%COMP%]:hover   .backside[_ngcontent-%COMP%], .image-flip.hover[_ngcontent-%COMP%]   .backside[_ngcontent-%COMP%]{transform:rotateY(0);border-radius:.25rem}.image-flip[_ngcontent-%COMP%]:hover   .frontside[_ngcontent-%COMP%], .image-flip.hover[_ngcontent-%COMP%]   .frontside[_ngcontent-%COMP%]{transform:rotateY(180deg)}.mainflip[_ngcontent-%COMP%]{transform-style:preserve-3d;transition:1s;transform:perspective(1000px);position:relative}.frontside[_ngcontent-%COMP%]{position:relative;transform:rotateY(0);z-index:2;margin-bottom:30px}.backside[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;background:white;transform:rotateY(-180deg);box-shadow:5px 7px 9px -4px #9e9e9e}.frontside[_ngcontent-%COMP%], .backside[_ngcontent-%COMP%]{-webkit-backface-visibility:hidden;backface-visibility:hidden;transition:1s;transform-style:preserve-3d}.frontside[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%], .backside[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{min-height:312px}.backside[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:18px;color:#007b5e!important}.frontside[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%], .backside[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{color:#007b5e!important}.frontside[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:120px;height:120px;border-radius:50%}"]}),x})()},4514:(U,w,a)=>{a.d(w,{B:()=>S});var t=a(5e3);let S=(()=>{class v{constructor(){}ngOnInit(){}}return v.\u0275fac=function(f){return new(f||v)},v.\u0275cmp=t.Xpm({type:v,selectors:[["app-msg-to-admin"]],decls:3,vars:0,consts:[[1,"btn","chatIcon"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-chat-right-fill"],["d","M14 0a2 2 0 0 1 2 2v12.793a.5.5 0 0 1-.854.353l-2.853-2.853a1 1 0 0 0-.707-.293H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h12z"]],template:function(f,T){1&f&&(t.TgZ(0,"button",0),t.O4$(),t.TgZ(1,"svg",1),t._UZ(2,"path",2),t.qZA()())},styles:[".chatIcon[_ngcontent-%COMP%]{position:fixed;background-color:#004057;bottom:30px;width:50px;height:50px;border-radius:50%;right:30px;color:#fff;font-size:15px;animation:mymove 5s infinite}@keyframes mymove{0%{box-shadow:0 0 3px 3px #fffefe}50%{box-shadow:0 0 10px 5px #fffefe}to{box-shadow:0 0 3px 3px #fffefe}}"]}),v})()},2601:(U,w,a)=>{a.d(w,{W:()=>M});var t=a(5e3),S=a(9528),v=a(1693),P=a(1083),f=a(2290),T=a(9808);function g(n,h){if(1&n&&(t.TgZ(0,"small"),t._uU(1),t.qZA()),2&n){const r=t.oxw(3);t.xp6(1),t.Oqu(r.fileMessage.name)}}function E(n,h){if(1&n){const r=t.EpF();t.TgZ(0,"i",14)(1,"input",15,16),t.NdJ("change",function(_){return t.CHM(r),t.oxw(2).onFileUpload(_)}),t.qZA(),t.YNc(3,g,2,1,"small",17),t.qZA()}if(2&n){const r=t.oxw(2);t.xp6(3),t.Q6J("ngIf",r.fileMessage)}}function x(n,h){if(1&n){const r=t.EpF();t.TgZ(0,"div",1)(1,"div",2)(2,"a",3),t.NdJ("click",function(){return t.CHM(r),t.oxw().toggleStatus()}),t._uU(3,"\xd7"),t.qZA(),t.TgZ(4,"div",4)(5,"label",5),t._uU(6),t.qZA(),t.TgZ(7,"div",6)(8,"div",7),t._UZ(9,"input",8,9),t.YNc(11,E,4,1,"i",10),t.qZA(),t.TgZ(12,"button",11),t.NdJ("click",function(){t.CHM(r);const _=t.MAs(10);return t.oxw().sendMessage(_.value)}),t.TgZ(13,"span",12),t._uU(14),t.qZA(),t._UZ(15,"i",13),t.qZA()()()()()}if(2&n){const r=t.oxw();t.xp6(6),t.hij(" ","chat"==r.process?"\u0627\u0644\u0631\u0633\u0627\u0644\u0629":"\u062a\u0642\u062f\u064a\u0645 \u0634\u0643\u0648\u064a"," "),t.xp6(5),t.Q6J("ngIf","chat"==r.process),t.xp6(3),t.Oqu("chat"==r.process?"\u0625\u0631\u0633\u0627\u0644":"\u062a\u0642\u062f\u064a\u0645")}}let M=(()=>{class n{constructor(r,d,_,Z){this.chatService=r,this.complaintService=d,this.router=_,this._toastr=Z,this.userType="",this.receiverId="",this.process="",this.toggleStatus=()=>{},this.startingChat=!0,this.message={},this.fileMessage=""}ngOnInit(){}onFileUpload(r){r.target.files.length>0&&(this.fileMessage=r.target.files[0],console.log(this.fileMessage),console.log(this.fileMessage.name))}sendMessage(r){if("chat"==this.process){""==this.receiverId&&(this.receiverId="1b146acc-ebff-4c65-9edf-64d5f046d8a3");var d=1;this.message.content=r,this.message.messageTypeId=d,this.message.receiverId=this.receiverId,this.sendMessageToEndPoint(this.message,this.receiverId),this.fileMessage&&(d=2,this.message.content=this.fileMessage,this.message.messageTypeId=d,this.message.receiverId=this.receiverId,this.sendMessageToEndPoint(this.fileMessage,this.receiverId))}else"complaint"==this.process&&(this.message.content=r,this.message.applicationUserId=this.receiverId,this.complaintService.storeComplaint(this.message).subscribe({next:_=>{this._toastr.info(_.message),this.startingChat=!1},error:_=>{console.log(_)}}))}sendMessageToEndPoint(r,d){this.chatService.sendMessage(r).subscribe({next:_=>{console.log(_),this.startingChat=!1,"sp"==this.userType?this.router.navigate(["/Spmanagement/chat"]):"client"==this.userType&&this.router.navigate(["/usermanagement/chat"])},error:_=>{console.log(_)}})}}return n.\u0275fac=function(r){return new(r||n)(t.Y36(S.a),t.Y36(v.o),t.Y36(P.F0),t.Y36(f._W))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-start-chat"]],inputs:{userType:"userType",receiverId:"receiverId",process:"process",toggleStatus:"toggleStatus"},decls:1,vars:1,consts:[["class","overlay p-5",4,"ngIf"],[1,"overlay","p-5"],[1,"popup","p-5"],[1,"close",2,"cursor","pointer",3,"click"],[1,"content"],[1,"form-label","fw-bold","cairo"],[1,"message-input","d-flex","flex-column","justify-content-center"],[1,"wrap"],["type","text","placeholder","\u0627\u0643\u062a\u0628 \u0634\u064a\u0626\u0627\u064b ...",1,"cairo"],["textInput",""],["class","fa-solid fa-paperclip attachment","aria-hidden","true",4,"ngIf"],[1,"btn","submit",3,"click"],[1,"mx-2"],["aria-hidden","true",1,"fa","fa-paper-plane"],["aria-hidden","true",1,"fa-solid","fa-paperclip","attachment"],["type","file","alt","","name","attatch","id","attatch",1,"attatch",3,"change"],["fileImage",""],[4,"ngIf"]],template:function(r,d){1&r&&t.YNc(0,x,16,3,"div",0),2&r&&t.Q6J("ngIf",d.startingChat)},directives:[T.O5],styles:[".overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:rgba(0,0,0,.5);transition:opacity .5s;display:flex;z-index:1000}.overlay[_ngcontent-%COMP%]   .popup[_ngcontent-%COMP%]{width:450px;background:#fff;margin:auto;border-radius:5px;position:relative;transition:all 5s ease-in-out;height:auto}.overlay[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:20px;left:30px;transition:all .2s;font-size:30px;font-weight:700;text-decoration:none;color:#333}.overlay[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover{color:#18af9a}.overlay[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]{position:relative}.overlay[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-family:cairo;border-radius:10px;width:100%;padding:12px;border:1px solid #004057;color:#004057}.overlay[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.overlay[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .attachment[_ngcontent-%COMP%]{position:absolute;left:14px;top:4px;z-index:4;margin-top:10px;font-size:1.4em;color:#004057;opacity:.5;cursor:pointer}.overlay[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .attachment[_ngcontent-%COMP%]:hover{opacity:1}.overlay[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .attachment[_ngcontent-%COMP%]   .attatch[_ngcontent-%COMP%]{opacity:0;left:0;position:absolute;width:30px;padding:0}.overlay[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]{border:none;margin:20px auto auto;padding:10px 20px;cursor:pointer;border:1px solid #004057;background:#004057;color:#fff}.overlay[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]:hover{background:#18af9a}.overlay[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]:focus{outline:none}"]}),n})()},6724:(U,w,a)=>{a.d(w,{hy:()=>Y,nu:()=>$});var t=a(5e3),S=a(9808),v=a(5963);function P(i,c){if(1&i&&(t.O4$(),t.TgZ(0,"linearGradient"),t._UZ(1,"stop",5)(2,"stop",6),t.qZA()),2&i){const e=t.oxw(2);t.uIk("id",e.svg.outerLinearGradient.id),t.xp6(1),t.uIk("stop-color",e.svg.outerLinearGradient.colorStop1)("stop-opacity",1),t.xp6(1),t.uIk("stop-color",e.svg.outerLinearGradient.colorStop2)("stop-opacity",1)}}function f(i,c){if(1&i&&(t.O4$(),t.TgZ(0,"radialGradient"),t._UZ(1,"stop",5)(2,"stop",6),t.qZA()),2&i){const e=t.oxw(2);t.uIk("id",e.svg.radialGradient.id),t.xp6(1),t.uIk("stop-color",e.svg.radialGradient.colorStop1)("stop-opacity",1),t.xp6(1),t.uIk("stop-color",e.svg.radialGradient.colorStop2)("stop-opacity",1)}}function T(i,c){if(1&i&&(t.O4$(),t._UZ(0,"circle")),2&i){const e=t.oxw(3);t.uIk("cx",e.svg.backgroundCircle.cx)("cy",e.svg.backgroundCircle.cy)("r",e.svg.backgroundCircle.r)("fill",e.svg.backgroundCircle.fill)("fill-opacity",e.svg.backgroundCircle.fillOpacity)("stroke",e.svg.backgroundCircle.stroke)("stroke-width",e.svg.backgroundCircle.strokeWidth)}}function g(i,c){if(1&i&&(t.O4$(),t._UZ(0,"circle")),2&i){const e=t.oxw(3);t.Q2q("fill","url(#",e.svg.radialGradient.id,")"),t.uIk("cx",e.svg.backgroundCircle.cx)("cy",e.svg.backgroundCircle.cy)("r",e.svg.backgroundCircle.r)("fill-opacity",e.svg.backgroundCircle.fillOpacity)("stroke",e.svg.backgroundCircle.stroke)("stroke-width",e.svg.backgroundCircle.strokeWidth)}}function E(i,c){if(1&i&&(t.O4$(),t.ynx(0),t.YNc(1,T,1,7,"circle",2),t.YNc(2,g,1,7,"circle",2),t.BQk()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!e.options.backgroundGradient),t.xp6(1),t.Q6J("ngIf",e.options.backgroundGradient)}}function x(i,c){if(1&i&&(t.O4$(),t._UZ(0,"circle")),2&i){const e=t.oxw(2);t.uIk("cx",e.svg.circle.cx)("cy",e.svg.circle.cy)("r",e.svg.circle.r)("fill",e.svg.circle.fill)("stroke",e.svg.circle.stroke)("stroke-width",e.svg.circle.strokeWidth)}}function M(i,c){if(1&i&&(t.O4$(),t._UZ(0,"path")),2&i){const e=t.oxw(3);t.uIk("d",e.svg.path.d)("stroke",e.svg.path.stroke)("stroke-width",e.svg.path.strokeWidth)("stroke-linecap",e.svg.path.strokeLinecap)("fill",e.svg.path.fill)}}function n(i,c){if(1&i&&(t.O4$(),t._UZ(0,"path")),2&i){const e=t.oxw(3);t.Q2q("stroke","url(#",e.svg.outerLinearGradient.id,")"),t.uIk("d",e.svg.path.d)("stroke-width",e.svg.path.strokeWidth)("stroke-linecap",e.svg.path.strokeLinecap)("fill",e.svg.path.fill)}}function h(i,c){if(1&i&&(t.O4$(),t.ynx(0),t.YNc(1,M,1,5,"path",2),t.YNc(2,n,1,5,"path",2),t.BQk()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!e.options.outerStrokeGradient),t.xp6(1),t.Q6J("ngIf",e.options.outerStrokeGradient)}}function r(i,c){if(1&i&&(t.O4$(),t.TgZ(0,"tspan"),t._uU(1),t.qZA()),2&i){const e=c.$implicit,l=t.oxw(4);t.uIk("x",l.svg.title.x)("y",l.svg.title.y)("dy",e.dy)("font-size",l.svg.title.fontSize)("font-weight",l.svg.title.fontWeight)("fill",l.svg.title.color),t.xp6(1),t.Oqu(e.span)}}function d(i,c){if(1&i&&(t.O4$(),t.ynx(0),t.YNc(1,r,2,7,"tspan",8),t.BQk()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",e.svg.title.tspans)}}function _(i,c){if(1&i&&(t.O4$(),t.TgZ(0,"tspan"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);t.uIk("font-size",e.svg.units.fontSize)("font-weight",e.svg.units.fontWeight)("fill",e.svg.units.color),t.xp6(1),t.Oqu(e.svg.units.text)}}function Z(i,c){if(1&i&&(t.O4$(),t.TgZ(0,"tspan"),t._uU(1),t.qZA()),2&i){const e=c.$implicit,l=t.oxw(4);t.uIk("x",l.svg.subtitle.x)("y",l.svg.subtitle.y)("dy",e.dy)("font-size",l.svg.subtitle.fontSize)("font-weight",l.svg.subtitle.fontWeight)("fill",l.svg.subtitle.color),t.xp6(1),t.Oqu(e.span)}}function G(i,c){if(1&i&&(t.O4$(),t.ynx(0),t.YNc(1,Z,2,7,"tspan",8),t.BQk()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",e.svg.subtitle.tspans)}}function N(i,c){if(1&i&&(t.O4$(),t.TgZ(0,"text",7),t.YNc(1,d,2,1,"ng-container",2),t.YNc(2,_,2,4,"tspan",2),t.YNc(3,G,2,1,"ng-container",2),t.qZA()),2&i){const e=t.oxw(2);t.uIk("x",e.svg.circle.cx)("y",e.svg.circle.cy)("text-anchor",e.svg.title.textAnchor),t.xp6(1),t.Q6J("ngIf",e.options.showTitle),t.xp6(1),t.Q6J("ngIf",e.options.showUnits),t.xp6(1),t.Q6J("ngIf",e.options.showSubtitle)}}function L(i,c){if(1&i&&(t.O4$(),t._UZ(0,"image",9)),2&i){const e=t.oxw(2);t.uIk("height",e.svg.image.height)("width",e.svg.image.width)("href",e.svg.image.src,null,"xlink")("x",e.svg.image.x)("y",e.svg.image.y)}}function B(i,c){if(1&i){const e=t.EpF();t.O4$(),t.TgZ(0,"svg",1),t.NdJ("click",function(O){return t.CHM(e),t.oxw().emitClickEvent(O)}),t.TgZ(1,"defs"),t.YNc(2,P,3,5,"linearGradient",2),t.YNc(3,f,3,5,"radialGradient",2),t.qZA(),t.YNc(4,E,3,2,"ng-container",2),t.YNc(5,x,1,6,"circle",2),t.YNc(6,h,3,2,"ng-container",2),t.YNc(7,N,4,6,"text",3),t.YNc(8,L,1,5,"image",4),t.qZA()}if(2&i){const e=t.oxw();t.uIk("viewBox",e.svg.viewBox)("height",e.svg.height)("width",e.svg.width)("class",e.options.class),t.xp6(2),t.Q6J("ngIf",e.options.outerStrokeGradient),t.xp6(1),t.Q6J("ngIf",e.options.backgroundGradient),t.xp6(1),t.Q6J("ngIf",e.options.showBackground),t.xp6(1),t.Q6J("ngIf",e.options.showInnerStroke),t.xp6(1),t.Q6J("ngIf",0!=+e.options.percent||e.options.showZeroOuterStroke),t.xp6(1),t.Q6J("ngIf",!e.options.showImage&&(e.options.showTitle||e.options.showUnits||e.options.showSubtitle)),t.xp6(1),t.Q6J("ngIf",e.options.showImage)}}class W{constructor(){this.class="",this.backgroundGradient=!1,this.backgroundColor="transparent",this.backgroundGradientStopColor="transparent",this.backgroundOpacity=1,this.backgroundStroke="transparent",this.backgroundStrokeWidth=0,this.backgroundPadding=5,this.percent=0,this.radius=90,this.space=4,this.toFixed=0,this.maxPercent=1e3,this.renderOnClick=!0,this.units="%",this.unitsFontSize="10",this.unitsFontWeight="normal",this.unitsColor="#444444",this.outerStrokeGradient=!1,this.outerStrokeWidth=8,this.outerStrokeColor="#78C000",this.outerStrokeGradientStopColor="transparent",this.outerStrokeLinecap="round",this.innerStrokeColor="#C7E596",this.innerStrokeWidth=4,this.titleFormat=void 0,this.title="auto",this.titleColor="#444444",this.titleFontSize="20",this.titleFontWeight="normal",this.subtitleFormat=void 0,this.subtitle="progress",this.subtitleColor="#A9A9A9",this.subtitleFontSize="10",this.subtitleFontWeight="normal",this.imageSrc=void 0,this.imageHeight=void 0,this.imageWidth=void 0,this.animation=!0,this.animateTitle=!0,this.animateSubtitle=!1,this.animationDuration=500,this.showTitle=!0,this.showSubtitle=!0,this.showUnits=!0,this.showImage=!1,this.showBackground=!0,this.showInnerStroke=!0,this.clockwise=!0,this.responsive=!1,this.startFromZero=!0,this.showZeroOuterStroke=!0,this.lazy=!1}}let $=(()=>{class i{constructor(e,l,O){this.elRef=l,this.document=O,this.onClick=new t.vpe,this.svgElement=null,this.isInViewport=!1,this.onViewportChanged=new t.vpe,this._viewportChangedSubscriber=null,this.options=new W,this.defaultOptions=new W,this._lastPercent=0,this._gradientUUID=null,this.render=()=>{this.applyOptions(),this.options.lazy?(null===this.svgElement&&this.draw(this._lastPercent),this.isInViewport&&(this.options.animation&&this.options.animationDuration>0?this.animate(this._lastPercent,this.options.percent):this.draw(this.options.percent),this._lastPercent=this.options.percent)):(this.options.animation&&this.options.animationDuration>0?this.animate(this._lastPercent,this.options.percent):this.draw(this.options.percent),this._lastPercent=this.options.percent)},this.polarToCartesian=(o,p,u,s)=>{let m=s*Math.PI/180;return{x:o+Math.sin(m)*u,y:p-Math.cos(m)*u}},this.draw=o=>{let p=(o=void 0===o?this.options.percent:Math.abs(o))>100?100:o,u=2*this.options.radius+2*this.options.outerStrokeWidth;this.options.showBackground&&(u+=2*this.options.backgroundStrokeWidth+this.max(0,2*this.options.backgroundPadding));let b,F,s={x:u/2,y:u/2},m_x=s.x,m_y=s.y-this.options.radius,C=this.polarToCartesian(s.x,s.y,this.options.radius,360*(this.options.clockwise?p:100-p)/100);100===p&&(C.x=C.x+(this.options.clockwise?-.01:.01)),[b,F]=p>50?this.options.clockwise?[1,1]:[1,0]:this.options.clockwise?[0,1]:[0,0];let y=this.options.animateTitle?o:this.options.percent,R=y>this.options.maxPercent?`${this.options.maxPercent.toFixed(this.options.toFixed)}+`:y.toFixed(this.options.toFixed),J=this.options.animateSubtitle?o:this.options.percent,I={x:s.x,y:s.y,textAnchor:"middle",color:this.options.titleColor,fontSize:this.options.titleFontSize,fontWeight:this.options.titleFontWeight,texts:[],tspans:[]};if(void 0!==this.options.titleFormat&&"Function"===this.options.titleFormat.constructor.name){let k=this.options.titleFormat(y);k instanceof Array?I.texts=[...k]:I.texts.push(k.toString())}else"auto"===this.options.title?I.texts.push(R):this.options.title instanceof Array?I.texts=[...this.options.title]:I.texts.push(this.options.title.toString());let A={x:s.x,y:s.y,textAnchor:"middle",color:this.options.subtitleColor,fontSize:this.options.subtitleFontSize,fontWeight:this.options.subtitleFontWeight,texts:[],tspans:[]};if(void 0!==this.options.subtitleFormat&&"Function"===this.options.subtitleFormat.constructor.name){let k=this.options.subtitleFormat(J);k instanceof Array?A.texts=[...k]:A.texts.push(k.toString())}else this.options.subtitle instanceof Array?A.texts=[...this.options.subtitle]:A.texts.push(this.options.subtitle.toString());let Q={text:`${this.options.units}`,fontSize:this.options.unitsFontSize,fontWeight:this.options.unitsFontWeight,color:this.options.unitsColor},D=0,z=1;if(this.options.showTitle&&(D+=I.texts.length),this.options.showSubtitle&&(D+=A.texts.length),this.options.showTitle)for(let k of I.texts)I.tspans.push({span:k,dy:this.getRelativeY(z,D)}),z++;if(this.options.showSubtitle)for(let k of A.texts)A.tspans.push({span:k,dy:this.getRelativeY(z,D)}),z++;null===this._gradientUUID&&(this._gradientUUID=this.uuid()),this.svg={viewBox:`0 0 ${u} ${u}`,width:this.options.responsive?"100%":u,height:this.options.responsive?"100%":u,backgroundCircle:{cx:s.x,cy:s.y,r:this.options.radius+this.options.outerStrokeWidth/2+this.options.backgroundPadding,fill:this.options.backgroundColor,fillOpacity:this.options.backgroundOpacity,stroke:this.options.backgroundStroke,strokeWidth:this.options.backgroundStrokeWidth},path:{d:`M ${m_x} ${m_y}\n        A ${this.options.radius} ${this.options.radius} 0 ${b} ${F} ${C.x} ${C.y}`,stroke:this.options.outerStrokeColor,strokeWidth:this.options.outerStrokeWidth,strokeLinecap:this.options.outerStrokeLinecap,fill:"none"},circle:{cx:s.x,cy:s.y,r:this.options.radius-this.options.space-this.options.outerStrokeWidth/2-this.options.innerStrokeWidth/2,fill:"none",stroke:this.options.innerStrokeColor,strokeWidth:this.options.innerStrokeWidth},title:I,units:Q,subtitle:A,image:{x:s.x-this.options.imageWidth/2,y:s.y-this.options.imageHeight/2,src:this.options.imageSrc,width:this.options.imageWidth,height:this.options.imageHeight},outerLinearGradient:{id:"outer-linear-"+this._gradientUUID,colorStop1:this.options.outerStrokeColor,colorStop2:"transparent"===this.options.outerStrokeGradientStopColor?"#FFF":this.options.outerStrokeGradientStopColor},radialGradient:{id:"radial-"+this._gradientUUID,colorStop1:this.options.backgroundColor,colorStop2:"transparent"===this.options.backgroundGradientStopColor?"#FFF":this.options.backgroundGradientStopColor}}},this.getAnimationParameters=(o,p)=>{let s,m,C,b=this.options.startFromZero||o<0?0:o,F=p<0?0:this.min(p,this.options.maxPercent),y=Math.abs(Math.round(F-b));return y>=100?(s=100,m=this.options.animateTitle||this.options.animateSubtitle?Math.round(y/s):1):(s=y,m=1),C=Math.round(this.options.animationDuration/s),C<10&&(C=10,s=this.options.animationDuration/C,m=!this.options.animateTitle&&!this.options.animateSubtitle&&y>100?Math.round(100/s):Math.round(y/s)),m<1&&(m=1),{times:s,step:m,interval:C}},this.animate=(o,p)=>{this._timerSubscription&&!this._timerSubscription.closed&&this._timerSubscription.unsubscribe();let u=this.options.startFromZero?0:o,s=p,{step:m,interval:C}=this.getAnimationParameters(u,s),b=u;this._timerSubscription=u<s?(0,v.H)(0,C).subscribe(()=>{b+=m,b<=s?!this.options.animateTitle&&!this.options.animateSubtitle&&b>=100?(this.draw(s),this._timerSubscription.unsubscribe()):this.draw(b):(this.draw(s),this._timerSubscription.unsubscribe())}):(0,v.H)(0,C).subscribe(()=>{b-=m,b>=s?!this.options.animateTitle&&!this.options.animateSubtitle&&s>=100?(this.draw(s),this._timerSubscription.unsubscribe()):this.draw(b):(this.draw(s),this._timerSubscription.unsubscribe())})},this.emitClickEvent=o=>{this.options.renderOnClick&&this.animate(0,this.options.percent),this.onClick.emit(o)},this.applyOptions=()=>{for(let o of Object.keys(this.options))this.hasOwnProperty(o)&&void 0!==this[o]?this.options[o]=this[o]:this.templateOptions&&void 0!==this.templateOptions[o]&&(this.options[o]=this.templateOptions[o]);this.options.radius=Math.abs(+this.options.radius),this.options.space=+this.options.space,this.options.percent=+this.options.percent>0?+this.options.percent:0,this.options.maxPercent=Math.abs(+this.options.maxPercent),this.options.animationDuration=Math.abs(this.options.animationDuration),this.options.outerStrokeWidth=Math.abs(+this.options.outerStrokeWidth),this.options.innerStrokeWidth=Math.abs(+this.options.innerStrokeWidth),this.options.backgroundPadding=+this.options.backgroundPadding},this.getRelativeY=(o,p)=>(1*(o-p/2)-.18).toFixed(2)+"em",this.min=(o,p)=>o<p?o:p,this.max=(o,p)=>o>p?o:p,this.uuid=()=>{var o=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(u){var s=(o+16*Math.random())%16|0;return o=Math.floor(o/16),("x"==u?s:3&s|8).toString(16)})},this.findSvgElement=function(){if(null===this.svgElement){let o=this.elRef.nativeElement.getElementsByTagName("svg");o.length>0&&(this.svgElement=o[0])}},this.checkViewport=()=>{this.findSvgElement();let o=this.isInViewport;this.isInViewport=this.isElementInViewport(this.svgElement),o!==this.isInViewport&&this.onViewportChanged.emit({oldValue:o,newValue:this.isInViewport})},this.onScroll=o=>{this.checkViewport()},this.loadEventsForLazyMode=()=>{if(this.options.lazy){this.document.addEventListener("scroll",this.onScroll,!0),this.window.addEventListener("resize",this.onScroll,!0),null===this._viewportChangedSubscriber&&(this._viewportChangedSubscriber=this.onViewportChanged.subscribe(({newValue:u})=>{u&&this.render()}));let o=(0,v.H)(0,50).subscribe(()=>{null===this.svgElement?this.checkViewport():o.unsubscribe()})}},this.unloadEventsForLazyMode=()=>{this.document.removeEventListener("scroll",this.onScroll,!0),this.window.removeEventListener("resize",this.onScroll,!0),null!==this._viewportChangedSubscriber&&(this._viewportChangedSubscriber.unsubscribe(),this._viewportChangedSubscriber=null)},this.document=O,this.window=this.document.defaultView,Object.assign(this.options,e),Object.assign(this.defaultOptions,e)}isDrawing(){return this._timerSubscription&&!this._timerSubscription.closed}isElementInViewport(e){if(null==e)return!1;let o,l=e.getBoundingClientRect(),O=e.parentNode;do{if(o=O.getBoundingClientRect(),l.top>=o.bottom||l.bottom<=o.top||l.left>=o.right||l.right<=o.left)return!1;O=O.parentNode}while(O!=this.document.body);return!(l.top>=(this.window.innerHeight||this.document.documentElement.clientHeight)||l.bottom<=0||l.left>=(this.window.innerWidth||this.document.documentElement.clientWidth)||l.right<=0)}ngOnInit(){this.loadEventsForLazyMode()}ngOnDestroy(){this.unloadEventsForLazyMode()}ngOnChanges(e){this.render(),"lazy"in e&&(e.lazy.currentValue?this.loadEventsForLazyMode():this.unloadEventsForLazyMode())}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(W),t.Y36(t.SBq),t.Y36(S.K0))},i.\u0275cmp=t.Xpm({type:i,selectors:[["circle-progress"]],inputs:{name:"name",class:"class",backgroundGradient:"backgroundGradient",backgroundColor:"backgroundColor",backgroundGradientStopColor:"backgroundGradientStopColor",backgroundOpacity:"backgroundOpacity",backgroundStroke:"backgroundStroke",backgroundStrokeWidth:"backgroundStrokeWidth",backgroundPadding:"backgroundPadding",radius:"radius",space:"space",percent:"percent",toFixed:"toFixed",maxPercent:"maxPercent",renderOnClick:"renderOnClick",units:"units",unitsFontSize:"unitsFontSize",unitsFontWeight:"unitsFontWeight",unitsColor:"unitsColor",outerStrokeGradient:"outerStrokeGradient",outerStrokeWidth:"outerStrokeWidth",outerStrokeColor:"outerStrokeColor",outerStrokeGradientStopColor:"outerStrokeGradientStopColor",outerStrokeLinecap:"outerStrokeLinecap",innerStrokeColor:"innerStrokeColor",innerStrokeWidth:"innerStrokeWidth",titleFormat:"titleFormat",title:"title",titleColor:"titleColor",titleFontSize:"titleFontSize",titleFontWeight:"titleFontWeight",subtitleFormat:"subtitleFormat",subtitle:"subtitle",subtitleColor:"subtitleColor",subtitleFontSize:"subtitleFontSize",subtitleFontWeight:"subtitleFontWeight",imageSrc:"imageSrc",imageHeight:"imageHeight",imageWidth:"imageWidth",animation:"animation",animateTitle:"animateTitle",animateSubtitle:"animateSubtitle",animationDuration:"animationDuration",showTitle:"showTitle",showSubtitle:"showSubtitle",showUnits:"showUnits",showImage:"showImage",showBackground:"showBackground",showInnerStroke:"showInnerStroke",clockwise:"clockwise",responsive:"responsive",startFromZero:"startFromZero",showZeroOuterStroke:"showZeroOuterStroke",lazy:"lazy",templateOptions:["options","templateOptions"]},outputs:{onClick:"onClick"},features:[t.TTD],decls:1,vars:1,consts:[["xmlns","http://www.w3.org/2000/svg","preserveAspectRatio","xMidYMid meet",3,"click",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","preserveAspectRatio","xMidYMid meet",3,"click"],[4,"ngIf"],["alignment-baseline","baseline",4,"ngIf"],["preserveAspectRatio","none",4,"ngIf"],["offset","5%"],["offset","95%"],["alignment-baseline","baseline"],[4,"ngFor","ngForOf"],["preserveAspectRatio","none"]],template:function(e,l){1&e&&t.YNc(0,B,9,11,"svg",0),2&e&&t.Q6J("ngIf",l.svg)},directives:[S.O5,S.sg],encapsulation:2}),i})(),Y=(()=>{class i{static forRoot(e={}){return{ngModule:i,providers:[{provide:W,useValue:e}]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[S.ez]]}),i})()}}]);